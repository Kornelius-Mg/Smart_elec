{% extends 'admin/base.html' %}

{% block "body" %}
  <!-- Right Sidebar Backdrop -->
  <div class="right-sidebar-backdrop"></div>
  <!-- /Right Sidebar Backdrop -->

  <!-- Main Content -->
  <div class="page-wrapper">
      <div class="container-fluid pt-25">
          	<!-- Title -->
				<div class="row heading-bg">
					<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
					  <h5 class="txt-dark">Transformateur</h5>
					</div>
					<!-- Breadcrumb -->
					<div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
					  <ol class="breadcrumb">
                        <li><a href={% url "home" %}>Dashboard</a></li>
                        <li><a href={% url "transfos" %}>Transformateurs</a></li>
						<li class="active"><span>Details</span></li>
					  </ol>
					</div>
					<!-- /Breadcrumb -->
				</div>
				<!-- /Title -->
          <!-- Row -->
          <div class="row">
              <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">
                  <div class="panel panel-default card-view pa-0">
                      <div class="panel-wrapper collapse in">
                          <div class="panel-body pa-0">
                              <div class="sm-data-box">
                                  <div class="container-fluid">
                                      <div class="row">
                                          <div class="col-xs-12 text-center pl-0 pr-0 data-wrap-left">
                                              <span class="txt-dark block counter">{{ transfo.designation }}</span>
                                              <span class="weight-500 uppercase-font block font-13">Designation</span>
                                          </div>
                                      </div>	
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                  <div class="panel panel-default card-view pa-0">
                      <div class="panel-wrapper collapse in">
                          <div class="panel-body pa-0">
                              <div class="sm-data-box">
                                  <div class="container-fluid">
                                      <div class="row">
                                          <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
                                              <span class="txt-dark block counter"><span class="counter-anim">{{ transfo.p_max }} </span>KVA</span>
                                              <span class="weight-500 uppercase-font block">Puissance active</span>
                                          </div>
                                      </div>	
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                  <div class="panel panel-default card-view pa-0">
                      <div class="panel-wrapper collapse in">
                          <div class="panel-body pa-0">
                              <div class="sm-data-box">
                                  <div class="container-fluid">
                                      <div class="row">
                                          <div class="col-xs-6 text-center pl-0 pr-0 data-wrap-left">
                                              <span class="txt-dark block counter"><span class="counter-anim">{{transfo.q_max}} </span>KVA</span>
                                              <span class="weight-500 uppercase-font block">Puissance active</span>
                                          </div>
                                      </div>	
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <!-- /Row -->
          
          <!-- Row -->
          <div class="row">
                  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <div class="panel panel-default card-view">
                      <div class="panel-heading">
                          <div class="pull-left">
                              <h6 class="panel-title txt-dark">Statistiques instantannées</h6>
                          </div>
                          <div class="pull-right">
                              <span class="no-margin-switcher">
                                  <input type="checkbox" checked id="morris_switch"  class="js-switch" data-color="#2ecd99" data-secondary-color="#dedede" data-size="small"/>	
                              </span>	
                          </div>
                          <div class="clearfix"></div>
                      </div>
                      <div class="panel-wrapper collapse in">
                        <div id="area_chart" class="morris-chart" style="height:293px;"></div>
                              <ul class="flex-stat mt-40">
                                  <li>
                                      <span class="block">Weekly Users</span>
                                      <span class="block txt-dark weight-500 font-18"><span class="counter-anim">3,24,222</span></span>
                                  </li>
                                  <li>
                                      <span class="block">Monthly Users</span>
                                      <span class="block txt-dark weight-500 font-18"><span class="counter-anim">1,23,432</span></span>
                                  </li>
                                  <li>
                                      <span class="block">Trend</span>
                                      <span class="block">
                                          <i class="zmdi zmdi-trending-up txt-success font-24"></i>
                                      </span>
                                  </li>
                              </ul>
                          </div>
                      </div>
                  </div>
              </div>
      </div>
      <div class="row">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="panel panel-default card-view panel-refresh">
                    <div class="refresh-container">
                        <div class="la-anim-1"></div>
                    </div>
                    <div class="panel-heading">
                        <div class="pull-left">
                            <h6 class="panel-title txt-dark">Details instantanés</h6>
                        </div>
                        <div class="pull-right">
                            <a href="#" class="pull-left inline-block refresh mr-15">
                                <i class="zmdi zmdi-replay"></i>
                            </a>
                            <a href="#" class="pull-left inline-block full-screen mr-15">
                                <i class="zmdi zmdi-fullscreen"></i>
                            </a>
                            <div class="pull-left inline-block dropdown">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false" role="button"><i class="zmdi zmdi-more-vert"></i></a>
                                <ul class="dropdown-menu bullet dropdown-menu-right"  role="menu">
                                    <li role="presentation"><a href="javascript:void(0)" role="menuitem"><i class="icon wb-reply" aria-hidden="true"></i>Edit</a></li>
                                    <li role="presentation"><a href="javascript:void(0)" role="menuitem"><i class="icon wb-share" aria-hidden="true"></i>Delete</a></li>
                                    <li role="presentation"><a href="javascript:void(0)" role="menuitem"><i class="icon wb-trash" aria-hidden="true"></i>New</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="panel-wrapper collapse in">
                        <div class="panel-body">
                            <div class="table-wrap">
                                <div class="">
                                    <table id="myTable1" class="table table-hover display  pb-30" >
                                        <thead>
                                            <tr>
                                                <th>Instant</th>
                                                <th>P. Phase1</th>
                                                <th>Q. Phase1</th>
                                                <th>P. Phase2</th>
                                                <th>Q. Phase2</th>
                                                <th>P. Phase3</th>
                                                <th>Q. Phase3</th>
                                                <th>Total</th>
                                                <th>etat</th>
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                <th>Instant</th>
                                                <th>P. Phase1</th>
                                                <th>Q. Phase1</th>
                                                <th>P. Phase2</th>
                                                <th>Q. Phase2</th>
                                                <th>P. Phase3</th>
                                                <th>Q. Phase3</th>
                                                <th>Total</th>
                                                <th>etat</th>
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            {% for detail in details %}  
                                            <tr>
                                                <td>{{transfo.designation}}</td>
                                                <td>{{transfo.p_max}}</td>
                                                <td>{{transfo.q_max}}</td>
                                                <td>
                                                    {% if compteur.global_state == 'ON' %}
                                                        <span class="label label-success">ON</span>
                                                    {% else %}
                                                    <span class="label label-danger">OFF</span>
                                                    {% endif %}  
                                                </td>
                                                <td>
                                                    <div class="btn-group-toggle">
                                                        <a href={% url "transfo" transfo.id %} title="Details"><i class="ti ti-plus  mr-10"></i></a>
                                                        <a href={% url "update-transfo" transfo.id %} user.id %} title="Editer"><i class="ti ti-pencil  mr-10"></i></a>
                                                        <a href={% url "delete-transfo" transfo.id %} title="Supprimer"><i class="ti ti-trash"></i></a>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                        </div>	
                    </div>
                </div>
            </div>
          </div>
          <!-- /Row -->
          
          <!-- Row -->
          <div class="row">
              <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                  <div class="panel panel-default card-view panel-refresh">
                      <div class="refresh-container">
                          <div class="la-anim-1"></div>
                      </div>
                      <div class="panel-heading">
                          <div class="pull-left">
                              <h6 class="panel-title txt-dark">Compteurs associés</h6>
                          </div>
                          <div class="pull-right">
                              <a href="#" class="pull-left inline-block refresh mr-15">
                                  <i class="zmdi zmdi-replay"></i>
                              </a>
                              <a href="#" class="pull-left inline-block full-screen mr-15">
                                  <i class="zmdi zmdi-fullscreen"></i>
                              </a>
                              <div class="pull-left inline-block dropdown">
                                  <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false" role="button"><i class="zmdi zmdi-more-vert"></i></a>
                                  <ul class="dropdown-menu bullet dropdown-menu-right"  role="menu">
                                      <li role="presentation"><a href="javascript:void(0)" role="menuitem"><i class="icon wb-reply" aria-hidden="true"></i>Edit</a></li>
                                      <li role="presentation"><a href="javascript:void(0)" role="menuitem"><i class="icon wb-share" aria-hidden="true"></i>Delete</a></li>
                                      <li role="presentation"><a href="javascript:void(0)" role="menuitem"><i class="icon wb-trash" aria-hidden="true"></i>New</a></li>
                                  </ul>
                              </div>
                          </div>
                          <div class="clearfix"></div>
                      </div>
                      <div class="panel-wrapper collapse in">
                          <div class="panel-body row pa-0">
                              <div class="table-wrap">
                                  <div class="table-responsive">
                                      <table class="table table-hover mb-0">
                                        <thead>
                                            <tr>
                                                <th>Appartement</th>
                                                <th>classe</th>
                                                <th>modele</th>
                                                <th>credit</th>
                                                <th>Transformateur</th>
                                                <th>P totale</th>
                                                <th>Q totale</th>
                                                <th>Etat</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                <th>Appartement</th>
                                                <th>classe</th>
                                                <th>modele</th>
                                                <th>credit</th>
                                                <th>Transformateur</th>
                                                <th>P. totale</th>
                                                <th>Q totale</th>
                                                <th>Etat</th>
                                                <th>Actions</th>
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            {% for compteur in compteurs %}  
                                            <tr>
                                                <td>{{compteur.appartement|truncatewords:5}}</td>
                                                <td>{{compteur.active_class}}</td>
                                                <td>{{compteur.modele}}</td>
                                                <td>{{compteur.credit}}</td>
                                                <td>{{compteur.transformateur}}</td>
                                                <td>{{compteur.p_phase1|add:compteur.p_phase2|add:compteur.p_phase3}}</td>
                                                <td>{{compteur.q_phase1|add:compteur.q_phase3|add:compteur.q_phase3}}</td>
                                                <td>
                                                    {% if compteur.global_state == 'ON' %}
                                                        <span class="label label-success">ON</span>
                                                    {% else %}
                                                    <span class="label label-danger">OFF</span>
                                                    {% endif %}  
                                                </td>
                                                <td>
                                                    <div class="btn-group-toggle">
                                                        <a href="" title="Details"><i class="ti ti-plus mr-10"></i></a>
                                                        <a href={% url "update-compteur" compteur.id %} title="Editer"><i class="ti ti-pencil mr-10"></i></a>
                                                        <a href={% url "delete-compteur" compteur.id %} title="Supprimer"><i class="ti ti-trash"></i></a>
                                                    </div>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                      </table>
                                  </div>
                                </div>
                          </div>	
                      </div>
                  </div>
              </div>
          </div>	
          <!-- Row -->
      </div>
{% endblock "body" %}